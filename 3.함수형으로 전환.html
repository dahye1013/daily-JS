<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <script>
      var users = [
        { id: 1, name: "ID", age: 38 },
        { id: 2, name: "AA", age: 3 },
        { id: 3, name: "DD", age: 8 },
        { id: 4, name: "IE", age: 18 },
        { id: 5, name: "IF", age: 28 },
        { id: 6, name: "IG", age: 43 },
        { id: 7, name: "EG", age: 22 },
        { id: 8, name: "HH", age: 11 },
      ];
      // 1. 명령형 코드--------------------------
      // 1)30 세 이상인 users를 거른다.
      var temp_users = [];
      for (var i = 0; i < users.length; i++) {
        if (users[i].age >= 30) temp_users.push(users[i]);
      }
      console.log(temp_users);
      //   2)30세 이상인 users 의 name을 수집한다.
      var names = [];
      for (var i = 0; i < temp_users.length; i++) {
        if (users[i].age >= 30) names.push(temp_users[i].name);
      }
      console.log(names);
      //   3)30세 미만인 users를 거른다.
      var temp_users = [];
      for (var i = 0; i < users.length; i++) {
        if (users[i].age < 30) temp_users.push(users[i]);
      }
      //   4) 30세 미만인 users의 ages를 수집한다.
      var names = [];
      for (var i = 0; i < temp_users.length; i++) {
        if (users[i].age < 30) names.push(temp_users[i].age);
      }
      console.log(names);

      //   2. _filter, _map 으로 리팩토링--------------------------
      /** 함수형 프로그래밍!
       * -추상화의 단위가 함수
       * -어떤 단위로 추상화 할 것인지
       * >predi를 통해서 어떤 함수를 통해서 if 조건을 통과 할 것인지를 위임한다.
       * >함수가 함수를 받아서 원하는 시점에 해당하는 함수가 알고 있는 인자를 적용
       * =>응용형 함수, 적응형 프로그래밍
       *
       * 즉, _filter는 응용형 함수 <- 함수를 인자로 받는다.
       * 원하는 시점에 평가를 하면서, 원하는 인자를 적용시킨다.
       *
       */
      function _filter(users, predi) {
        var new_list = [];
        for (var i = 0; i < temp_users.length; i++) {
          if (predi(users[i])) new_list.push(users[i]);
        }
        return new_list;
      }
      console.log(
        "응용형 함수 실행1",
        _filter(users, function (user) {
          return user.age > 30;
        })
      );
      console.log(
        "응용형 함수 실행2",
        _filter(users, function (user) {
          return user.age > 10;
        })
      );
    </script>
  </body>
</html>
